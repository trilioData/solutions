#DELETE main FROM restored_vm_resource_metadata AS main INNER JOIN restored_vm_resources AS sub1 INNER JOIN restores AS sub2 INNER JOIN snapshots AS sub3 WHERE main.restored_vm_resource_id = sub1.id AND sub1.restore_id = sub2.id AND sub2.snapshot_id = sub3.id AND sub3.deleted = 1
#SELECT * FROM restored_vm_resource_metadata AS del_table JOIN (SELECT main.id FROM restored_vm_resource_metadata AS main INNER JOIN restored_vm_resources AS sub1 INNER JOIN restores AS sub2 INNER JOIN snapshots AS sub3 WHERE main.restored_vm_resource_id = sub1.id AND sub1.restore_id = sub2.id AND sub2.snapshot_id = sub3.id AND sub3.deleted = 1 LIMIT 1) del_select ON del_select.id = del_table.id
DELETE del_table FROM restored_vm_resource_metadata AS del_table JOIN (SELECT main.id FROM restored_vm_resource_metadata AS main INNER JOIN restored_vm_resources AS sub1 INNER JOIN restores AS sub2 INNER JOIN snapshots AS sub3 WHERE main.restored_vm_resource_id = sub1.id AND sub1.restore_id = sub2.id AND sub2.snapshot_id = sub3.id AND sub3.deleted = 1 LIMIT #LIMIT#) del_select ON del_select.id = del_table.id
